<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker - CampaignPulse</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .budget-overview { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .budget-card { background: white; padding: 20px; border-radius: 8px; text-align: center; position: relative; }
        .budget-amount { font-size: 32px; font-weight: bold; margin-bottom: 10px; }
        .budget-total { color: #10b981; }
        .budget-spent { color: #dc2626; }
        .budget-remaining { color: #059669; }
        .budget-allocated { color: #f59e0b; }
        .progress-ring { width: 120px; height: 120px; margin: 0 auto 15px; position: relative; }
        .progress-circle { width: 100%; height: 100%; border-radius: 50%; background: conic-gradient(#10b981 0deg, #10b981 var(--progress), #f3f4f6 var(--progress), #f3f4f6 360deg); display: flex; align-items: center; justify-content: center; }
        .progress-inner { width: 80px; height: 80px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .budget-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .control-card { background: white; padding: 20px; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #10b981; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        button:hover { background: #059669; }
        .campaign-budgets { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .campaign-item { display: flex; justify-content: between; align-items: center; padding: 15px; border-bottom: 1px solid #f3f4f6; }
        .campaign-info { flex: 1; }
        .campaign-name { font-weight: bold; margin-bottom: 5px; }
        .campaign-details { font-size: 12px; color: #6b7280; }
        .budget-bar { width: 200px; height: 20px; background: #f3f4f6; border-radius: 10px; overflow: hidden; margin: 0 15px; position: relative; }
        .budget-fill { height: 100%; background: linear-gradient(90deg, #10b981, #059669); transition: width 0.3s ease; }
        .budget-percentage { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 11px; font-weight: bold; color: white; }
        .budget-amounts { text-align: right; font-size: 12px; }
        .spent-amount { color: #dc2626; font-weight: bold; }
        .total-amount { color: #6b7280; }
        .alert-section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .alert-item { padding: 10px 15px; margin: 10px 0; border-radius: 4px; border-left: 4px solid; }
        .alert-warning { background: #fef3c7; border-color: #f59e0b; color: #92400e; }
        .alert-danger { background: #fecaca; border-color: #dc2626; color: #991b1b; }
        .alert-success { background: #dcfce7; border-color: #10b981; color: #065f46; }
        .chart-section { background: white; padding: 20px; border-radius: 8px; }
        .chart-container { height: 300px; margin: 20px 0; }
        .budget-history { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-top: 20px; }
        .day-spend { text-align: center; padding: 10px; background: #f8fafc; border-radius: 4px; }
        .day-label { font-size: 11px; color: #6b7280; margin-bottom: 5px; }
        .day-amount { font-weight: bold; color: #10b981; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ’° Budget Tracker</h1>
            <p>Monitor campaign spending, track budget utilization, and optimize allocation in real-time</p>
        </div>

        <div class="budget-overview">
            <div class="budget-card">
                <div class="progress-ring">
                    <div class="progress-circle" style="--progress: 216deg;">
                        <div class="progress-inner">60%</div>
                    </div>
                </div>
                <div class="budget-amount budget-total" id="totalBudget">$25,000</div>
                <div>Total Monthly Budget</div>
            </div>
            <div class="budget-card">
                <div class="budget-amount budget-spent" id="totalSpent">$15,000</div>
                <div>Total Spent</div>
                <div style="font-size: 12px; color: #6b7280; margin-top: 5px;">60% of budget</div>
            </div>
            <div class="budget-card">
                <div class="budget-amount budget-remaining" id="totalRemaining">$10,000</div>
                <div>Remaining Budget</div>
                <div style="font-size: 12px; color: #6b7280; margin-top: 5px;">40% available</div>
            </div>
            <div class="budget-card">
                <div class="budget-amount budget-allocated" id="totalAllocated">$22,500</div>
                <div>Allocated Budget</div>
                <div style="font-size: 12px; color: #6b7280; margin-top: 5px;">90% allocated</div>
            </div>
        </div>

        <div class="budget-controls">
            <div class="control-card">
                <h2>Set Campaign Budget</h2>
                <form id="budgetForm">
                    <div class="form-group">
                        <label>Campaign</label>
                        <select id="campaignSelect" required>
                            <option value="">Select Campaign</option>
                            <option value="google-ads">Google Ads - Black Friday</option>
                            <option value="facebook-ads">Facebook - Holiday Sale</option>
                            <option value="instagram-ads">Instagram - Product Launch</option>
                            <option value="email-campaign">Email Newsletter</option>
                            <option value="linkedin-ads">LinkedIn B2B</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Budget Amount ($)</label>
                        <input type="number" id="budgetAmount" placeholder="5000" required>
                    </div>
                    <div class="form-group">
                        <label>Budget Period</label>
                        <select id="budgetPeriod">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                    <button type="submit">Set Budget</button>
                    <button type="button" onclick="resetBudgets()">Reset All</button>
                </form>
            </div>

            <div class="control-card">
                <h2>Budget Alerts</h2>
                <div class="form-group">
                    <label>Alert Threshold (%)</label>
                    <input type="range" id="alertThreshold" min="50" max="95" value="80" oninput="updateThreshold(this.value)">
                    <div style="text-align: center; margin-top: 5px;">
                        <span id="thresholdValue">80%</span> of budget
                    </div>
                </div>
                <div class="form-group">
                    <label>Notification Method</label>
                    <select id="notificationMethod">
                        <option value="email">Email Alert</option>
                        <option value="dashboard">Dashboard Only</option>
                        <option value="both">Email + Dashboard</option>
                    </select>
                </div>
                <button onclick="saveAlertSettings()">Save Alert Settings</button>
            </div>
        </div>

        <div class="alert-section">
            <h2>Budget Alerts</h2>
            <div id="budgetAlerts">
                <div class="alert-item alert-warning">
                    <strong>Warning:</strong> Google Ads campaign has used 85% of monthly budget
                </div>
                <div class="alert-item alert-danger">
                    <strong>Critical:</strong> Facebook campaign exceeded daily budget by $200
                </div>
                <div class="alert-item alert-success">
                    <strong>Good:</strong> Email campaign is 40% under budget with strong ROI
                </div>
            </div>
        </div>

        <div class="campaign-budgets">
            <h2>Campaign Budget Breakdown</h2>
            <div id="campaignBudgetList"></div>
        </div>

        <div class="chart-section">
            <h2>Budget Utilization Trends</h2>
            <div class="chart-container">
                <canvas id="budgetChart"></canvas>
            </div>
            
            <h3>Daily Spending Overview</h3>
            <div class="budget-history" id="dailySpending"></div>
        </div>
    </div>

    <script>
        let budgetChart;
        let budgetData = {
            totalBudget: 25000,
            totalSpent: 15000,
            totalAllocated: 22500,
            campaigns: [
                { id: 'google-ads', name: 'Google Ads - Black Friday', budget: 8000, spent: 6800, period: 'monthly' },
                { id: 'facebook-ads', name: 'Facebook - Holiday Sale', budget: 6000, spent: 4200, period: 'monthly' },
                { id: 'instagram-ads', name: 'Instagram - Product Launch', budget: 4000, spent: 2100, period: 'monthly' },
                { id: 'email-campaign', name: 'Email Newsletter', budget: 2500, spent: 1200, period: 'monthly' },
                { id: 'linkedin-ads', name: 'LinkedIn B2B', budget: 2000, spent: 700, period: 'monthly' }
            ],
            dailySpending: [
                { day: 'Mon', amount: 850 },
                { day: 'Tue', amount: 920 },
                { day: 'Wed', amount: 780 },
                { day: 'Thu', amount: 1100 },
                { day: 'Fri', amount: 950 },
                { day: 'Sat', amount: 650 },
                { day: 'Sun', amount: 480 }
            ],
            alertThreshold: 80
        };

        document.addEventListener('DOMContentLoaded', () => {
            updateBudgetOverview();
            displayCampaignBudgets();
            initializeBudgetChart();
            displayDailySpending();
            setupBudgetForm();
            startBudgetTracking();
        });

        function updateBudgetOverview() {
            const remaining = budgetData.totalBudget - budgetData.totalSpent;
            const spentPercentage = (budgetData.totalSpent / budgetData.totalBudget * 100).toFixed(0);
            const allocatedPercentage = (budgetData.totalAllocated / budgetData.totalBudget * 100).toFixed(0);

            document.getElementById('totalBudget').textContent = `$${budgetData.totalBudget.toLocaleString()}`;
            document.getElementById('totalSpent').textContent = `$${budgetData.totalSpent.toLocaleString()}`;
            document.getElementById('totalRemaining').textContent = `$${remaining.toLocaleString()}`;
            document.getElementById('totalAllocated').textContent = `$${budgetData.totalAllocated.toLocaleString()}`;

            // Update progress ring
            const progressDegrees = (budgetData.totalSpent / budgetData.totalBudget) * 360;
            document.querySelector('.progress-circle').style.setProperty('--progress', `${progressDegrees}deg`);
            document.querySelector('.progress-inner').textContent = `${spentPercentage}%`;
        }

        function displayCampaignBudgets() {
            const container = document.getElementById('campaignBudgetList');
            
            container.innerHTML = budgetData.campaigns.map(campaign => {
                const spentPercentage = (campaign.spent / campaign.budget * 100).toFixed(0);
                const remaining = campaign.budget - campaign.spent;
                const isOverBudget = campaign.spent > campaign.budget;
                const isNearLimit = spentPercentage >= budgetData.alertThreshold;

                return `
                    <div class="campaign-item">
                        <div class="campaign-info">
                            <div class="campaign-name">${campaign.name}</div>
                            <div class="campaign-details">${campaign.period} budget â€¢ ${spentPercentage}% utilized</div>
                        </div>
                        <div class="budget-bar">
                            <div class="budget-fill" style="width: ${Math.min(spentPercentage, 100)}%; background: ${isOverBudget ? '#dc2626' : isNearLimit ? '#f59e0b' : '#10b981'};"></div>
                            <div class="budget-percentage">${spentPercentage}%</div>
                        </div>
                        <div class="budget-amounts">
                            <div class="spent-amount">$${campaign.spent.toLocaleString()}</div>
                            <div class="total-amount">/ $${campaign.budget.toLocaleString()}</div>
                            <div style="color: ${remaining >= 0 ? '#059669' : '#dc2626'};">
                                ${remaining >= 0 ? `$${remaining.toLocaleString()} left` : `$${Math.abs(remaining).toLocaleString()} over`}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function initializeBudgetChart() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            budgetChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Budget Spent',
                        data: [3500, 7200, 11800, 15000],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Budget Allocated',
                        data: [5000, 10000, 17500, 22500],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, position: 'top' }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function displayDailySpending() {
            const container = document.getElementById('dailySpending');
            
            container.innerHTML = budgetData.dailySpending.map(day => `
                <div class="day-spend">
                    <div class="day-label">${day.day}</div>
                    <div class="day-amount">$${day.amount}</div>
                </div>
            `).join('');
        }

        function setupBudgetForm() {
            document.getElementById('budgetForm').addEventListener('submit', (e) => {
                e.preventDefault();
                setBudget();
            });
        }

        function setBudget() {
            const campaignId = document.getElementById('campaignSelect').value;
            const amount = parseFloat(document.getElementById('budgetAmount').value);
            const period = document.getElementById('budgetPeriod').value;

            if (!campaignId || !amount) {
                alert('Please select a campaign and enter a budget amount');
                return;
            }

            const campaign = budgetData.campaigns.find(c => c.id === campaignId);
            if (campaign) {
                campaign.budget = amount;
                campaign.period = period;
            } else {
                // Add new campaign budget
                const campaignName = document.getElementById('campaignSelect').selectedOptions[0].text;
                budgetData.campaigns.push({
                    id: campaignId,
                    name: campaignName,
                    budget: amount,
                    spent: 0,
                    period: period
                });
            }

            // Recalculate totals
            budgetData.totalAllocated = budgetData.campaigns.reduce((sum, c) => sum + c.budget, 0);
            
            updateBudgetOverview();
            displayCampaignBudgets();
            
            // Reset form
            document.getElementById('budgetForm').reset();
            
            alert(`Budget set successfully for ${campaignId}: $${amount} (${period})`);
        }

        function updateThreshold(value) {
            budgetData.alertThreshold = value;
            document.getElementById('thresholdValue').textContent = value + '%';
            displayCampaignBudgets(); // Refresh to show new threshold colors
        }

        function saveAlertSettings() {
            const threshold = document.getElementById('alertThreshold').value;
            const method = document.getElementById('notificationMethod').value;
            
            budgetData.alertThreshold = threshold;
            budgetData.notificationMethod = method;
            
            alert(`Alert settings saved: ${threshold}% threshold via ${method}`);
        }

        function resetBudgets() {
            if (confirm('Reset all campaign budgets? This cannot be undone.')) {
                budgetData.campaigns.forEach(campaign => {
                    campaign.budget = 0;
                    campaign.spent = 0;
                });
                budgetData.totalAllocated = 0;
                budgetData.totalSpent = 0;
                
                updateBudgetOverview();
                displayCampaignBudgets();
                
                alert('All budgets have been reset');
            }
        }

        function startBudgetTracking() {
            // Simulate real-time budget updates
            setInterval(() => {
                budgetData.campaigns.forEach(campaign => {
                    // Simulate spending (small random amounts)
                    const dailySpend = Math.floor(Math.random() * 50) + 10;
                    campaign.spent += dailySpend;
                });

                // Update totals
                budgetData.totalSpent = budgetData.campaigns.reduce((sum, c) => sum + c.spent, 0);
                
                updateBudgetOverview();
                displayCampaignBudgets();
                checkBudgetAlerts();
                
            }, 30000); // Update every 30 seconds
        }

        function checkBudgetAlerts() {
            const alerts = [];
            
            budgetData.campaigns.forEach(campaign => {
                const spentPercentage = (campaign.spent / campaign.budget) * 100;
                
                if (spentPercentage >= 100) {
                    alerts.push({
                        type: 'danger',
                        message: `${campaign.name} has exceeded budget by $${(campaign.spent - campaign.budget).toLocaleString()}`
                    });
                } else if (spentPercentage >= budgetData.alertThreshold) {
                    alerts.push({
                        type: 'warning',
                        message: `${campaign.name} has used ${spentPercentage.toFixed(0)}% of budget`
                    });
                }
            });

            // Update alerts display
            const container = document.getElementById('budgetAlerts');
            if (alerts.length > 0) {
                container.innerHTML = alerts.map(alert => `
                    <div class="alert-item alert-${alert.type}">
                        <strong>${alert.type === 'danger' ? 'Critical' : 'Warning'}:</strong> ${alert.message}
                    </div>
                `).join('');
            }
        }
    </script>
</body>
</html>